"use strict";(self.webpackChunkbigowl_site=self.webpackChunkbigowl_site||[]).push([[4099],{6877:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});var t=s(7991),r=s(4848),i=s(8453);const l={slug:"jwt-bearer-flow-salesforce",title:"JWT Bearer Flow in Salesforce",authors:["deep"],tags:["Salesforce","jwt","oauth","api","integration"]},a=void 0,c={authorsImageUrls:[void 0]},o=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Generate a Private Key and X.509 Certificate",id:"step-1-generate-a-private-key-and-x509-certificate",level:2},{value:"1.1 Install OpenSSL",id:"11-install-openssl",level:3},{value:"1.2 Generate an RSA Private Key",id:"12-generate-an-rsa-private-key",level:3},{value:"1.3 Create an Unencrypted Key File",id:"13-create-an-unencrypted-key-file",level:3},{value:"1.4 Generate a Certificate Signing Request (CSR)",id:"14-generate-a-certificate-signing-request-csr",level:3},{value:"1.5 Generate the Self-Signed Certificate",id:"15-generate-the-self-signed-certificate",level:3},{value:"Step 2: Create a JWT Connected App in Salesforce",id:"step-2-create-a-jwt-connected-app-in-salesforce",level:2},{value:"2.1 Navigate to Setup",id:"21-navigate-to-setup",level:3},{value:"2.2 Create a New Connected App",id:"22-create-a-new-connected-app",level:3},{value:"2.3 Note Client ID and Secret",id:"23-note-client-id-and-secret",level:3},{value:"Step 3: Approve the Connected App",id:"step-3-approve-the-connected-app",level:2},{value:"Step 4: Create a JWT Token",id:"step-4-create-a-jwt-token",level:2},{value:"4.1 Structure the JWT",id:"41-structure-the-jwt",level:3},{value:"Step 5: Obtain an Access Token Using Postman",id:"step-5-obtain-an-access-token-using-postman",level:2},{value:"5.1 Configure the Request",id:"51-configure-the-request",level:3},{value:"5.2 Set Up the Body",id:"52-set-up-the-body",level:3},{value:"5.3 Send the Request",id:"53-send-the-request",level:3},{value:"Step 6: Use the Access Token",id:"step-6-use-the-access-token",level:2},{value:"6.1 Example: Fetch Accounts",id:"61-example-fetch-accounts",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"Integrating external applications with Salesforce often requires secure, seamless authentication. The JWT Bearer Flow is a robust OAuth 2.0 mechanism that enables server-to-server integration without direct user interaction. In this comprehensive guide, you'll learn how to set up JWT authentication for Salesforce, generate the necessary keys and certificates, configure a Connected App, and test the flow using Postman. Instructions are provided for both Windows and macOS environments."}),"\n",(0,r.jsx)(n.h2,{id:""}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before you begin, ensure you have:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A Salesforce account with permissions to create Connected Apps."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.postman.com/downloads/",children:"Postman"})," installed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.openssl.org/",children:"OpenSSL"})," installed for generating keys and certificates."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["On ",(0,r.jsx)(n.strong,{children:"Windows"}),", you may need to set the ",(0,r.jsx)(n.code,{children:"OPENSSL_CONF"})," environment variable to point to your OpenSSL configuration file.",(0,r.jsx)(n.br,{}),"\n","On ",(0,r.jsx)(n.strong,{children:"macOS"}),", OpenSSL is typically pre-installed, but you can update it via ",(0,r.jsx)(n.a,{href:"https://brew.sh/",children:"Homebrew"})," if needed."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-1-generate-a-private-key-and-x509-certificate",children:"Step 1: Generate a Private Key and X.509 Certificate"}),"\n",(0,r.jsx)(n.h3,{id:"11-install-openssl",children:"1.1 Install OpenSSL"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Windows:"})," Download and install OpenSSL from the ",(0,r.jsx)(n.a,{href:"https://slproweb.com/products/Win32OpenSSL.html",children:"official site"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"macOS:"})," Install via Homebrew:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"brew install openssl\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"12-generate-an-rsa-private-key",children:"1.2 Generate an RSA Private Key"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Windows:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmd",children:"set OPENSSL_CONF=C:\\Program Files\\OpenSSL-Win64\\bin\\openssl.cfg\nopenssl genrsa -des3 -passout pass:x -out server.pass.key 2048\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"macOS:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"openssl genrsa -des3 -passout pass:x -out server.pass.key 2048\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"13-create-an-unencrypted-key-file",children:"1.3 Create an Unencrypted Key File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"openssl rsa -passin pass:x -in server.pass.key -out server.key\n"})}),"\n",(0,r.jsx)(n.h3,{id:"14-generate-a-certificate-signing-request-csr",children:"1.4 Generate a Certificate Signing Request (CSR)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"openssl req -new -key server.key -out server.csr\n"})}),"\n",(0,r.jsx)(n.p,{children:"You will be prompted for organization details. Fill them as appropriate."}),"\n",(0,r.jsx)(n.h3,{id:"15-generate-the-self-signed-certificate",children:"1.5 Generate the Self-Signed Certificate"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"openssl x509 -req -sha256 -days 365 -in server.csr -signkey server.key -out server.crt\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"server.key"})," (private key) and ",(0,r.jsx)(n.code,{children:"server.crt"})," (certificate) files are required for the next steps. Keep your private key secure."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-2-create-a-jwt-connected-app-in-salesforce",children:"Step 2: Create a JWT Connected App in Salesforce"}),"\n",(0,r.jsx)(n.h3,{id:"21-navigate-to-setup",children:"2.1 Navigate to Setup"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Log in to Salesforce."}),"\n",(0,r.jsxs)(n.li,{children:["Click the gear icon and select ",(0,r.jsx)(n.strong,{children:"Setup"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"22-create-a-new-connected-app",children:"2.2 Create a New Connected App"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["In the Quick Find box, search for ",(0,r.jsx)(n.strong,{children:"App Manager"})," and open it."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"New Connected App"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Fill in the required fields:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Connected App Name:"})," (e.g., JWT Integration)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Name:"})," (auto-filled)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Contact Email:"})," (your email)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Under ",(0,r.jsx)(n.strong,{children:"API (Enable OAuth Settings)"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Check ",(0,r.jsx)(n.strong,{children:"Enable OAuth Settings"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.strong,{children:"Callback URL"})," to ",(0,r.jsx)(n.code,{children:"http://localhost:1717/OauthRedirect"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Check ",(0,r.jsx)(n.strong,{children:"Use Digital Signatures"})," and upload your ",(0,r.jsx)(n.code,{children:"server.crt"})," file."]}),"\n",(0,r.jsxs)(n.li,{children:["Select OAuth Scopes:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"api"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"refresh_token, offline_access"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"After saving, Salesforce may take a few minutes to propagate your Connected App settings."})}),"\n",(0,r.jsx)(n.h3,{id:"23-note-client-id-and-secret",children:"2.3 Note Client ID and Secret"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["After saving, copy the ",(0,r.jsx)(n.strong,{children:"Consumer Key"})," (Client ID) and ",(0,r.jsx)(n.strong,{children:"Consumer Secret"})," from the app detail page."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-3-approve-the-connected-app",children:"Step 3: Approve the Connected App"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["In ",(0,r.jsx)(n.strong,{children:"Setup"}),", search for ",(0,r.jsx)(n.strong,{children:"Manage Connected Apps"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Click on your Connected App."}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Edit Policies"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Under ",(0,r.jsx)(n.strong,{children:"OAuth Policies"}),", set ",(0,r.jsx)(n.strong,{children:"Permitted Users"})," to ",(0,r.jsx)(n.strong,{children:"Admin approved users are pre-authorized"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Save your changes."}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"If this step is skipped, authentication requests may fail with insufficient permissions."})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-4-create-a-jwt-token",children:"Step 4: Create a JWT Token"}),"\n",(0,r.jsx)(n.h3,{id:"41-structure-the-jwt",children:"4.1 Structure the JWT"}),"\n",(0,r.jsx)(n.p,{children:"A JWT consists of three parts: Header, Payload, and Signature."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Header:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n\t"alg": "RS256"\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "iss": "Your_Client_ID",\n    "sub": "user@example.com", // Salesforce username\n    "aud": "https://login.salesforce.com",\n    "exp": <Current Unix Timestamp + 120>\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"iss"}),": Consumer Key from Salesforce."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sub"}),": Salesforce username to impersonate."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"aud"}),": Use ",(0,r.jsx)(n.code,{children:"https://login.salesforce.com"})," for production, or ",(0,r.jsx)(n.code,{children:"https://test.salesforce.com"})," for sandbox."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"exp"}),": Expiration time (in seconds since epoch)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["You can use ",(0,r.jsx)(n.a,{href:"https://jwt.io/",children:"jwt.io"})," to construct and sign your JWT. Use your ",(0,r.jsx)(n.code,{children:"server.key"})," as the private key."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-5-obtain-an-access-token-using-postman",children:"Step 5: Obtain an Access Token Using Postman"}),"\n",(0,r.jsx)(n.h3,{id:"51-configure-the-request",children:"5.1 Configure the Request"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open Postman and create a new ",(0,r.jsx)(n.strong,{children:"POST"})," request."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Set the URL to:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"https://login.salesforce.com/services/oauth2/token\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"52-set-up-the-body",children:"5.2 Set Up the Body"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.strong,{children:"x-www-form-urlencoded"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add the following key-value pairs:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Key"}),(0,r.jsx)(n.th,{children:"Value"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"grant_type"}),(0,r.jsxs)(n.td,{children:["urn:ietf:params:oauth:grant-type",":jwt-bearer"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"assertion"}),(0,r.jsx)(n.td,{children:"(Paste your generated JWT token here)"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"53-send-the-request",children:"5.3 Send the Request"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Send"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["If successful, you'll receive a JSON response containing an ",(0,r.jsx)(n.code,{children:"access_token"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"If you receive an error, double-check your JWT structure, signature, and ensure the Connected App is properly configured and approved."})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-6-use-the-access-token",children:"Step 6: Use the Access Token"}),"\n",(0,r.jsx)(n.p,{children:"With the access token, you can now make authenticated API requests to Salesforce."}),"\n",(0,r.jsx)(n.h3,{id:"61-example-fetch-accounts",children:"6.1 Example: Fetch Accounts"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a new ",(0,r.jsx)(n.strong,{children:"GET"})," request in Postman."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Set the URL to:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"https://yourInstance.salesforce.com/services/data/vXX.X/sobjects/Account/\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"yourInstance"})," and ",(0,r.jsx)(n.code,{children:"vXX.X"})," with your Salesforce instance and API version."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"Headers"})," tab, add:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Authorization: Bearer <your_access_token>\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Send"})," to execute the request."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"You have now set up secure, server-to-server integration with Salesforce using the JWT Bearer Flow. This approach is ideal for backend services and automated integrations, providing robust security without requiring user interaction. If you encounter issues, review each step carefully and consult Salesforce documentation for troubleshooting."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"For production deployments, always safeguard your private keys and restrict access to your Connected App."})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},7991:e=>{e.exports=JSON.parse('{"permalink":"/blog/jwt-bearer-flow-salesforce","source":"@site/blog/2025-05-28-first-blog-post.md","title":"JWT Bearer Flow in Salesforce","description":"Introduction","date":"2025-05-28T00:00:00.000Z","tags":[{"inline":false,"label":"Salesforce","permalink":"/blog/tags/salesforce","description":"Salesforce tag description"},{"inline":false,"label":"JWT","permalink":"/blog/tags/jwt","description":"JWT tag description"},{"inline":false,"label":"OAuth","permalink":"/blog/tags/oauth","description":"OAuth tag description"},{"inline":false,"label":"API","permalink":"/blog/tags/api","description":"API tag description"},{"inline":false,"label":"Integration","permalink":"/blog/tags/integration","description":"Integration tag description"}],"readingTime":4.08,"hasTruncateMarker":true,"authors":[{"name":"Deep Ranjan","title":"Front End Engineer","url":"https://github.com/sf_ranjan","page":{"permalink":"/blog/authors/deep"},"socials":{"x":"https://x.com/sf_ranjan","github":"https://github.com/sf-ranjan","linkedin":"https://www.linkedin.com/in/sf-ranjan/"},"imageURL":"https://lh3.googleusercontent.com/a/ACg8ocIhH_i40Ry1ixSegJnPT0V6YMurBV3FbiaGd7SpdKOogfI4qTGy=s576-c-no","key":"deep"}],"frontMatter":{"slug":"jwt-bearer-flow-salesforce","title":"JWT Bearer Flow in Salesforce","authors":["deep"],"tags":["Salesforce","jwt","oauth","api","integration"]},"unlisted":false,"prevItem":{"title":"Welcome","permalink":"/blog/welcome"},"nextItem":{"title":"React Blog Post","permalink":"/blog/React-blog-post"}}')},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);